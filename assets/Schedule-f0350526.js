import{O as A,r as s,U as E,Q as z,j as e,L,F as m,R as M,$ as U,u as H,a as x,T as R}from"./index-8992e9dd.js";import{C as V,S as W,V as I}from"./CurrentClassses-8e582056.js";function T({login:l}){const o=A(),[c,i]=s.useState(!1),[a,p]=s.useState("winter"),[u,f]=s.useState([]),[j,g]=s.useState({}),[b,w]=s.useState(),[v,C]=s.useState(!1),[k,S]=s.useState([]),[h,N]=s.useState(null),{user:r}=s.useContext(E);async function y(n,t){try{const d=await fetch(n);if(!d.ok)throw new Error("Network response was not ok");const $=await d.json();t($)}catch(d){console.log(d)}}s.useEffect(()=>{l&&(r?z(r.uid,n=>{N({uid:r.uid,schedules:n.val()})},"schedules"):o("/"))},[r,l,o]),s.useEffect(()=>{const n=a==="fall"?"":"winter-";fetch("https://raw.githubusercontent.com/mingli202/next-schedule-maker/main/public/json/allClasses.json").then(t=>t.json()).then(t=>f(Object.values(t))).catch(t=>console.log(t)),y(`/me-schedule-maker/data/${n}data.json`,g).catch(t=>console.log(t))},[a]);async function D(){await U()}const[F,O]=s.useState(!0);return e.jsxs(V.Provider,{value:{chosenClasses:k,setChosenClasses:S,hoveredClass:b,setHoveredClass:w},children:[e.jsxs("nav",{className:"md:text-base text-xs w-full bg-c9 text-c1 shrink-0 flex justify-between items-center",children:[e.jsx(L,{to:r?`../users/${r.uid}`:"/",children:e.jsx(m,{icon:M,className:"ml-2 cursor-pointer transition hover:text-c4"})}),e.jsxs("div",{className:"flex gap-2",children:[a==="fall"?"Fall 2023":"Winter 2024"," JAC"," ",e.jsx("span",{className:" max-md:hidden",children:"Mock Schedule Maker"}),e.jsx(J,{show:c,handleClick:()=>i(n=>!n),current:a,setCurrent:p})]}),e.jsx("p",{onClick:()=>void D(),className:"mr-2 cursor-pointer transition hover:text-c4",children:h?"Sign Out":""})]}),e.jsxs("section",{className:"w-full basis-full bg-c9 md:grid md:grid-cols-12 md:grid-rows-6 box-border gap-2 px-2 pb-2 text-c9 flex flex-col md:text-base text-xs overflow-auto",children:[e.jsx(W,{classes:u,setLoading:C,userData:h,aucmpData:j}),v&&u.length!==0&&e.jsx(e.Fragment,{children:e.jsx(I,{})})]}),F&&e.jsxs("div",{className:"absolute w-screen h-screen z-30 flex flex-col items-center justify-center bg-white/40 backdrop-filter backdrop-blur-lg",children:[e.jsx("p",{children:"An improved version with autobuild and export to excel is available at:"}),e.jsx("a",{href:"https://dream-builder-hazel.vercel.app/editor/search",children:"https://dream-builder-hazel.vercel.app/editor/search"}),e.jsx("button",{onClick:()=>O(!1),children:"Close"})]})]})}function J({show:l,handleClick:o,current:c,setCurrent:i}){const a=H({rotate:l?180:0,y:l?"0%":"-200%"});return e.jsxs(e.Fragment,{children:[e.jsx(x.div,{style:{rotate:a.rotate},children:e.jsx(m,{icon:R,onClick:o,className:"cursor-pointer"})}),e.jsxs(x.div,{style:{y:a.y},className:"absolute md:top-6 top-4 z-10 text-c1 bg-c9 [&>p]:p-1 [&>p]:cursor-pointer",children:[e.jsx("p",{className:`${c==="fall"?"bg-c8":""} hover:font-bold transition`,onClick:()=>{i("fall"),o()},children:"Fall 2023"}),e.jsx("p",{className:`${c==="winter"?"bg-c8":""} hover:font-bold transition`,onClick:()=>{i("winter"),o()},children:"Winter 2024"})]})]})}export{T as default};
